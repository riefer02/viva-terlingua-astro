---
import { getStrapiImageUrl } from '@/utils/image';
import type { HomePage } from '@/types/strapi';
import MarqueeSponsors from '@/components/sponsors/MarqueeSponsors.astro';
import PrimarySponsor from '@/components/sponsors/PrimarySponsor.astro';
import cookoffConfig from '@/config/cookoff';

interface Props {
  data: HomePage;
  showSponsors?: boolean;
  showDates?: boolean;
  showPrimarySponsor?: boolean;
}

const {
  data,
  showSponsors = true,
  showDates = true,
  showPrimarySponsor = true,
} = Astro.props;
const imageUrl = getStrapiImageUrl(data.marqueeImage);
const imageAlt = data.marqueeImage?.alternativeText || data.title || '';
const { dates } = cookoffConfig;
---

<div class="relative w-full bg-background">
  {/* Main Container */}
  <div
    class="relative mx-auto max-w-[1920px] h-[500px] md:h-[600px] overflow-hidden"
  >
    {/* Background Image with Gradient Overlay */}
    <div class="absolute inset-0">
      {
        imageUrl && (
          <img
            src={imageUrl}
            alt={imageAlt}
            class="w-full h-full object-cover"
          />
        )
      }
      <div
        class="absolute inset-0 bg-gradient-to-t from-background via-background/20 to-transparent"
      >
      </div>
    </div>

    {/* Sponsors Bar */}
    {showSponsors && <MarqueeSponsors />}

    {/* Content Container - Centered both vertically and horizontally */}
    <div class="absolute inset-0 flex items-center justify-center">
      <div class="max-w-7xl w-full px-4">
        {/* Title Section */}
        <div class="max-w-4xl mx-auto space-y-8 text-center">
          <h1
            class="text-3xl md:text-4xl lg:text-[3.5rem] leading-[1.1] md:leading-[1.2] font-extrabold tracking-tight md:tracking-normal text-foreground max-w-[18ch] mx-auto"
          >
            {data.title}
          </h1>
          {
            data.primaryText && (
              <p class="text-lg md:text-xl lg:text-2xl leading-relaxed text-muted-foreground max-w-[35ch] mx-auto">
                {data.primaryText}
              </p>
            )
          }
          {/* Date Display */}
          {
            showDates && (
              <div class="inline-flex items-center gap-2 px-6 py-3 bg-primary/15 backdrop-blur-sm rounded-full border border-primary/30 text-primary font-medium">
                <span class="text-lg">
                  {dates.start} - {dates.end}, {dates.year}
                </span>
              </div>
            )
          }
        </div>
      </div>
    </div>

    {/* Primary Sponsor */}
    {showPrimarySponsor && <PrimarySponsor />}
  </div>
</div>

<style>
  /* Smooth transitions */
  div {
    @apply transition-colors duration-300;
  }

  /* Text shadow for better readability */
  h1,
  p {
    text-shadow: 0 1px 2px rgb(0 0 0 / 0.1);
  }
</style>
